import { requestBody } from "../functions/request-body";
import { getInstanceContainer } from "../functions/get-instance-container";
import { RxHttpResponse } from "./rx-http-response";
import { httpRequestContainer } from "../core/http-request-container";
import { Observable } from "rxjs";
export class RxHttp {
    constructor() {
    }
    getFilters() {
        let filters = (this._baseConfig && this._baseConfig.filters) ? this._baseConfig.filters : [];
        let filterService = this._serviceContainers.filter(t => t.type == "filter")[0];
        let requestFilters = [];
        if (filterService)
            filterService.config.forEach(t => requestFilters.push(t));
        filters.forEach(t => requestFilters.push(t));
        return requestFilters;
    }
    getInMemoryFilter() {
        let inMemory = this._serviceContainers.filter(t => t.type == "inmemory")[0];
        if (inMemory && this._baseConfig && this._baseConfig.filters)
            return this._baseConfig.filters.filter(t => t.isInMemory)[0];
        return null;
    }
    request(method, config) {
        return new Observable(subscriber => {
            if (!this._baseConfig)
                this._baseConfig = httpRequestContainer.getConfig() || {};
            if (!this._serviceContainers)
                this._serviceContainers = getInstanceContainer(this);
            let serviceContainer = this._serviceContainers.filter(t => t.type == "http")[0];
            let request = requestBody(method, this._baseConfig, serviceContainer, config, this);
            if (request) {
                let error = this._baseConfig ? this._baseConfig.onError : null;
                let response = new RxHttpResponse(request, this.getFilters(), this.getInMemoryFilter(), this.onError || error, this.badRequest);
                response.process('subscribe', subscriber);
            }
            else {
                subscriber.next(null);
                subscriber.complete();
            }
        });
    }
    lookup(configs) {
        return new Observable(subscriber => {
            let propNames = [];
            let subscriptions = [];
            let jObject = {};
            configs.forEach(t => {
                propNames.push(t.propName);
                subscriptions.push(this.get(t).subscribe(X => {
                    jObject[t.propName] = X;
                    if (Object.keys(jObject).length == propNames.length) {
                        subscriber.next(jObject);
                        subscriber.complete();
                    }
                }));
            });
        });
    }
    get(config) {
        return this.request('GET', config);
    }
    post(config) {
        return this.request('POST', config);
    }
    put(config) {
        return this.request('PUT', config);
    }
    patch(config) {
        return this.request('PATCH', config);
    }
    delete(config) {
        return this.request('DELETE', config);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicngtaHR0cC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0ByeHdlYi9odHRwLyIsInNvdXJjZXMiOlsiZG9tYWluL3J4LWh0dHAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBQ3hELE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLHFDQUFxQyxDQUFDO0FBRTNFLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUNwRCxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxnQ0FBZ0MsQ0FBQztBQUV0RSxPQUFPLEVBQUUsVUFBVSxFQUEyQixNQUFNLE1BQU0sQ0FBQztBQUszRCxNQUFNLE9BQU8sTUFBTTtJQVVmO0lBRUEsQ0FBQztJQUVPLFVBQVU7UUFDZCxJQUFJLE9BQU8sR0FBRyxDQUFDLElBQUksQ0FBQyxXQUFXLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUM3RixJQUFJLGFBQWEsR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMvRSxJQUFJLGNBQWMsR0FBRyxFQUFFLENBQUM7UUFDeEIsSUFBSSxhQUFhO1lBQ2IsYUFBYSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDOUQsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM3QyxPQUFPLGNBQWMsQ0FBQztJQUMx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QyxRQUFRLEVBQUUsQ0FBQztxQkFDekI7Z0JBQ0wsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNSLENBQUMsQ0FBQyxDQUFDO1FBRVAsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBR0QsR0FBRyxDQUFJLE1BQW1DO1FBQ3RDLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDdkMsQ0FBQztJQUVELElBQUksQ0FBSSxNQUFzQztRQUMxQyxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQ3hDLENBQUM7SUFFRCxHQUFHLENBQUksTUFBc0M7UUFDekMsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztJQUN2QyxDQUFDO0lBRUQsS0FBSyxDQUFJLE1BQXNDO1FBQzNDLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDekMsQ0FBQztJQUVELE1BQU0sQ0FBSSxNQUFzQztRQUM1QyxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQzFDLENBQUM7Q0FDSiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEh0dHBSZXF1ZXN0Q29uZmlnfSBmcm9tIFwiLi4vaW50ZXJmYWNlL2h0dHAtcmVxdWVzdC1jb25maWdcIjtcclxuaW1wb3J0IHsgcmVxdWVzdEJvZHkgfSBmcm9tIFwiLi4vZnVuY3Rpb25zL3JlcXVlc3QtYm9keVwiO1xyXG5pbXBvcnQgeyBnZXRJbnN0YW5jZUNvbnRhaW5lciB9IGZyb20gXCIuLi9mdW5jdGlvbnMvZ2V0LWluc3RhbmNlLWNvbnRhaW5lclwiO1xyXG5pbXBvcnQgeyBTZXJ2aWNlQ29udGFpbmVyQ29uZmlnIH0gZnJvbSBcIi4uL2ludGVyZmFjZS9zZXJ2aWNlLWNvbnRhaW5lci1jb25maWdcIjtcclxuaW1wb3J0IHsgUnhIdHRwUmVzcG9uc2UgfSBmcm9tIFwiLi9yeC1odHRwLXJlc3BvbnNlXCI7XHJcbmltcG9ydCB7IGh0dHBSZXF1ZXN0Q29udGFpbmVyIH0gZnJvbSBcIi4uL2NvcmUvaHR0cC1yZXF1ZXN0LWNvbnRhaW5lclwiO1xyXG5pbXBvcnQgeyBYaHJGaWx0ZXJDb25maWcgfSBmcm9tIFwiLi4vaW50ZXJmYWNlL3hoci1maWx0ZXItY29uZmlnXCI7XHJcbmltcG9ydCB7IE9ic2VydmFibGUsIGZvcmtKb2luICwgU3Vic2NyaXB0aW9uIH0gZnJvbSBcInJ4anNcIjtcclxuaW1wb3J0IHsgQmFzZUh0dHBDbGllbnRDb25maWcgfSBmcm9tIFwiLi4vaW50ZXJmYWNlL2Jhc2UtaHR0cC1jbGllbnQtY29uZmlnXCI7XHJcbmltcG9ydCB7IEh0dHBSZXF1ZXN0Qm9keUNvbmZpZyB9IGZyb20gXCIuLi9pbnRlcmZhY2UvaHR0cC1yZXF1ZXN0LWJvZHktY29uZmlnXCI7XHJcbmltcG9ydCB7IExvb2t1cEh0dHBSZXF1ZXN0Q29uZmlnIH0gZnJvbSBcIi4uL2ludGVyZmFjZS9sb29rdXAtaHR0cC1yZXF1ZXN0LWNvbmZpZ1wiO1xyXG5pbXBvcnQgeyBIdHRwUmVzcG9uc2UgfSBmcm9tICcuLi9tb2RlbHMnXHJcbmV4cG9ydCBjbGFzcyBSeEh0dHAge1xyXG5cclxuICAgIHBhdGg6IHN0cmluZztcclxuXHJcbiAgICBwcml2YXRlIF9zZXJ2aWNlQ29udGFpbmVyczogU2VydmljZUNvbnRhaW5lckNvbmZpZ1tdXHJcbiAgICBwcml2YXRlIF9iYXNlQ29uZmlnOiBCYXNlSHR0cENsaWVudENvbmZpZztcclxuXHJcbiAgICBvbkVycm9yOiAocmVzcG9uc2U6IEh0dHBSZXNwb25zZSkgPT4gdm9pZDtcclxuICAgIGJhZFJlcXVlc3Q6IChyZXN1bHQ6IGFueSkgPT4gdm9pZDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRGaWx0ZXJzKCkge1xyXG4gICAgICAgIGxldCBmaWx0ZXJzID0gKHRoaXMuX2Jhc2VDb25maWcgJiYgdGhpcy5fYmFzZUNvbmZpZy5maWx0ZXJzKSA/IHRoaXMuX2Jhc2VDb25maWcuZmlsdGVycyA6IFtdO1xyXG4gICAgICAgIGxldCBmaWx0ZXJTZXJ2aWNlID0gdGhpcy5fc2VydmljZUNvbnRhaW5lcnMuZmlsdGVyKHQgPT4gdC50eXBlID09IFwiZmlsdGVyXCIpWzBdO1xyXG4gICAgICAgIGxldCByZXF1ZXN0RmlsdGVycyA9IFtdO1xyXG4gICAgICAgIGlmIChmaWx0ZXJTZXJ2aWNlKVxyXG4gICAgICAgICAgICBmaWx0ZXJTZXJ2aWNlLmNvbmZpZy5mb3JFYWNoKHQgPT4gcmVxdWVzdEZpbHRlcnMucHVzaCh0KSk7XHJcbiAgICAgICAgZmlsdGVycy5mb3JFYWNoKHQgPT4gcmVxdWVzdEZpbHRlcnMucHVzaCh0KSk7XHJcbiAgICAgICAgcmV0dXJuIHJlcXVlc3RGaWx0ZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0SW5NZW1vcnlGaWx0ZXIoKTogWGhyRmlsdGVyQ29uZmlnIHtcclxuICAgICAgICBsZXQgaW5NZW1vcnkgPSB0aGlzLl9zZXJ2aWNlQ29udGFpbmVycy5maWx0ZXIodCA9PiB0LnR5cGUgPT0gXCJpbm1lbW9yeVwiKVswXTtcclxuICAgICAgICBpZiAoaW5NZW1vcnkgJiYgdGhpcy5fYmFzZUNvbmZpZyAmJiB0aGlzLl9iYXNlQ29uZmlnLmZpbHRlcnMpXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9iYXNlQ29uZmlnLmZpbHRlcnMuZmlsdGVyKHQgPT4gdC5pc0luTWVtb3J5KVswXTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlcXVlc3Q8VD4obWV0aG9kOiBzdHJpbmcsIGNvbmZpZzogSHR0cFJlcXVlc3RDb25maWcgfCBIdHRwUmVxdWVzdEJvZHlDb25maWcgfCBzdHJpbmcpOiBPYnNlcnZhYmxlPFQ+IHtcclxuICAgICAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoc3Vic2NyaWJlciA9PiB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fYmFzZUNvbmZpZylcclxuICAgICAgICAgICAgICAgIHRoaXMuX2Jhc2VDb25maWcgPSBodHRwUmVxdWVzdENvbnRhaW5lci5nZXRDb25maWcoKSB8fCB7fTtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9zZXJ2aWNlQ29udGFpbmVycylcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NlcnZpY2VDb250YWluZXJzID0gZ2V0SW5zdGFuY2VDb250YWluZXIodGhpcyk7XHJcbiAgICAgICAgICAgIGxldCBzZXJ2aWNlQ29udGFpbmVyID0gdGhpcy5fc2VydmljZUNvbnRhaW5lcnMuZmlsdGVyKHQgPT4gdC50eXBlID09IFwiaHR0cFwiKVswXVxyXG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IHJlcXVlc3RCb2R5KG1ldGhvZCwgdGhpcy5fYmFzZUNvbmZpZywgc2VydmljZUNvbnRhaW5lciwgY29uZmlnLCB0aGlzKTtcclxuICAgICAgICAgICAgaWYgKHJlcXVlc3QpIHtcclxuICAgICAgICAgICAgICAgIGxldCBlcnJvciA9IHRoaXMuX2Jhc2VDb25maWcgPyB0aGlzLl9iYXNlQ29uZmlnLm9uRXJyb3IgOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlc3BvbnNlID0gbmV3IFJ4SHR0cFJlc3BvbnNlKHJlcXVlc3QsIHRoaXMuZ2V0RmlsdGVycygpLCB0aGlzLmdldEluTWVtb3J5RmlsdGVyKCksIHRoaXMub25FcnJvciB8fCBlcnJvciwgdGhpcy5iYWRSZXF1ZXN0KTtcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnByb2Nlc3MoJ3N1YnNjcmliZScsIHN1YnNjcmliZXIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KG51bGwpO1xyXG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBsb29rdXA8VD4oY29uZmlnczogTG9va3VwSHR0cFJlcXVlc3RDb25maWdbXSk6IE9ic2VydmFibGU8VD4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZShzdWJzY3JpYmVyID0+IHtcclxuICAgICAgICAgICAgbGV0IHByb3BOYW1lcyA9IFtdO1xyXG4gICAgICAgICAgICBsZXQgc3Vic2NyaXB0aW9ucyA9IFtdO1xyXG4gICAgICAgICAgICBsZXQgak9iamVjdDphbnkgPSB7fTtcclxuICAgICAgICAgICAgY29uZmlncy5mb3JFYWNoKHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgcHJvcE5hbWVzLnB1c2godC5wcm9wTmFtZSk7XHJcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25zLnB1c2godGhpcy5nZXQodCkuc3Vic2NyaWJlKFggPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGpPYmplY3RbdC5wcm9wTmFtZV0gPSBYO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhqT2JqZWN0KS5sZW5ndGggPT0gcHJvcE5hbWVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQoak9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZ2V0PFQ+KGNvbmZpZz86IEh0dHBSZXF1ZXN0Q29uZmlnIHwgc3RyaW5nKTogT2JzZXJ2YWJsZTxUPiAge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3QoJ0dFVCcsIGNvbmZpZyk7XHJcbiAgICB9XHJcblxyXG4gICAgcG9zdDxUPihjb25maWc6IEh0dHBSZXF1ZXN0Qm9keUNvbmZpZyB8IHN0cmluZyk6IE9ic2VydmFibGU8VD4gIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KCdQT1NUJywgY29uZmlnKTtcclxuICAgIH1cclxuXHJcbiAgICBwdXQ8VD4oY29uZmlnOiBIdHRwUmVxdWVzdEJvZHlDb25maWcgfCBzdHJpbmcpOiBPYnNlcnZhYmxlPFQ+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KCdQVVQnLCBjb25maWcpO1xyXG4gICAgfVxyXG5cclxuICAgIHBhdGNoPFQ+KGNvbmZpZzogSHR0cFJlcXVlc3RCb2R5Q29uZmlnIHwgc3RyaW5nKTogT2JzZXJ2YWJsZTxUPiAge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3QoJ1BBVENIJywgY29uZmlnKTtcclxuICAgIH1cclxuXHJcbiAgICBkZWxldGU8VD4oY29uZmlnOiBIdHRwUmVxdWVzdEJvZHlDb25maWcgfCBzdHJpbmcpOiBPYnNlcnZhYmxlPFQ+ICB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCgnREVMRVRFJywgY29uZmlnKTtcclxuICAgIH1cclxufSJdfQ==