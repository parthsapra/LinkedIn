import { routeContainer } from "./route-container";
import { BaseCanActivate } from "../guard/base-can-activate.guard";
import { BaseCanDeactivate } from "../guard/base-can-deactivate.guard";
import { routePath } from "../functions/route-path.function";
export class RouteProvider {
    static addRoute(route) {
        this.addCanActivate(route);
        this.addCanDeactivate(route);
        this._routes.push(route);
    }
    static applyRootRoutes(_routes) {
        this.routes = [];
        var routes = _routes || [...this._routes];
        var isAllowEncryption = routeContainer.get().urlEncryption;
        if (isAllowEncryption) {
            routes.forEach(route => {
                route.path = routePath(route.path);
            });
        }
        this._routes = [];
        this.routes = routes;
    }
    static addCanActivate(route) {
        if (!route.canActivate)
            route.canActivate = [BaseCanActivate];
        else
            route.canActivate.push(BaseCanActivate);
    }
    static addCanDeactivate(route) {
        if (!route.canDeactivate)
            route.canDeactivate = [BaseCanDeactivate];
        else
            route.canDeactivate.push(BaseCanDeactivate);
    }
}
RouteProvider.routes = [];
RouteProvider._routes = [];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm91dGUtcHJvdmlkZXIuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9Acnh3ZWIvYW5ndWxhci1yb3V0ZXIvIiwic291cmNlcyI6WyJjb3JlL3JvdXRlLXByb3ZpZGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNuRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sa0NBQWtDLENBQUM7QUFDbkUsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sb0NBQW9DLENBQUM7QUFDdkUsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBRTdELE1BQU0sT0FBTyxhQUFhO0lBS3RCLE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBWTtRQUN4QixJQUFJLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzNCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM3QixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQTtJQUM1QixDQUFDO0lBR0QsTUFBTSxDQUFDLGVBQWUsQ0FBQyxPQUFlO1FBQ2xDLElBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDO1FBQ2pCLElBQUksTUFBTSxHQUFHLE9BQU8sSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQzFDLElBQUksaUJBQWlCLEdBQUcsY0FBYyxDQUFDLEdBQUcsRUFBRSxDQUFDLGFBQWEsQ0FBQztRQUMzRCxJQUFJLGlCQUFpQixFQUFFO1lBQ25CLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUU7Z0JBQ25CLEtBQUssQ0FBQyxJQUFJLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUN2QyxDQUFDLENBQUMsQ0FBQTtTQUNMO1FBQ0QsSUFBSSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7UUFDbEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7SUFDekIsQ0FBQztJQUlPLE1BQU0sQ0FBQyxjQUFjLENBQUMsS0FBWTtRQUN0QyxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVc7WUFDbEIsS0FBSyxDQUFDLFdBQVcsR0FBRyxDQUFDLGVBQWUsQ0FBQyxDQUFDOztZQUV0QyxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUNoRCxDQUFDO0lBRU8sTUFBTSxDQUFDLGdCQUFnQixDQUFDLEtBQVk7UUFDeEMsSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhO1lBQ3BCLEtBQUssQ0FBQyxhQUFhLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDOztZQUUxQyxLQUFLLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0lBQ3BELENBQUM7O0FBdENNLG9CQUFNLEdBQVcsRUFBRSxDQUFDO0FBRVoscUJBQU8sR0FBVyxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyAgUm91dGVzLCBSb3V0ZSB9IGZyb20gXCJAYW5ndWxhci9yb3V0ZXJcIjtcclxuaW1wb3J0IHsgcm91dGVDb250YWluZXIgfSBmcm9tIFwiLi9yb3V0ZS1jb250YWluZXJcIjtcclxuaW1wb3J0IHsgQmFzZUNhbkFjdGl2YXRlIH0gZnJvbSBcIi4uL2d1YXJkL2Jhc2UtY2FuLWFjdGl2YXRlLmd1YXJkXCI7XHJcbmltcG9ydCB7IEJhc2VDYW5EZWFjdGl2YXRlIH0gZnJvbSBcIi4uL2d1YXJkL2Jhc2UtY2FuLWRlYWN0aXZhdGUuZ3VhcmRcIjtcclxuaW1wb3J0IHsgcm91dGVQYXRoIH0gZnJvbSBcIi4uL2Z1bmN0aW9ucy9yb3V0ZS1wYXRoLmZ1bmN0aW9uXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUm91dGVQcm92aWRlciB7XHJcbiAgICBzdGF0aWMgcm91dGVzOiBSb3V0ZXMgPSBbXTtcclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBfcm91dGVzOiBSb3V0ZXMgPSBbXTtcclxuXHJcbiAgICBzdGF0aWMgYWRkUm91dGUocm91dGU6IFJvdXRlKSB7XHJcbiAgICAgICAgdGhpcy5hZGRDYW5BY3RpdmF0ZShyb3V0ZSk7XHJcbiAgICAgICAgdGhpcy5hZGRDYW5EZWFjdGl2YXRlKHJvdXRlKTtcclxuICAgICAgICB0aGlzLl9yb3V0ZXMucHVzaChyb3V0ZSlcclxuICAgIH1cclxuXHJcblxyXG4gICAgc3RhdGljIGFwcGx5Um9vdFJvdXRlcyhfcm91dGVzPzpSb3V0ZXMpIHtcclxuICAgICAgICB0aGlzLnJvdXRlcyA9IFtdO1xyXG4gICAgICAgIHZhciByb3V0ZXMgPSBfcm91dGVzIHx8IFsuLi50aGlzLl9yb3V0ZXNdO1xyXG4gICAgICAgIHZhciBpc0FsbG93RW5jcnlwdGlvbiA9IHJvdXRlQ29udGFpbmVyLmdldCgpLnVybEVuY3J5cHRpb247XHJcbiAgICAgICAgaWYgKGlzQWxsb3dFbmNyeXB0aW9uKSB7XHJcbiAgICAgICAgICAgIHJvdXRlcy5mb3JFYWNoKHJvdXRlID0+IHtcclxuICAgICAgICAgICAgICAgIHJvdXRlLnBhdGggPSByb3V0ZVBhdGgocm91dGUucGF0aCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3JvdXRlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMucm91dGVzID0gcm91dGVzO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgYWRkQ2FuQWN0aXZhdGUocm91dGU6IFJvdXRlKSB7XHJcbiAgICAgICAgaWYgKCFyb3V0ZS5jYW5BY3RpdmF0ZSlcclxuICAgICAgICAgICAgcm91dGUuY2FuQWN0aXZhdGUgPSBbQmFzZUNhbkFjdGl2YXRlXTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJvdXRlLmNhbkFjdGl2YXRlLnB1c2goQmFzZUNhbkFjdGl2YXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBhZGRDYW5EZWFjdGl2YXRlKHJvdXRlOiBSb3V0ZSkge1xyXG4gICAgICAgIGlmICghcm91dGUuY2FuRGVhY3RpdmF0ZSlcclxuICAgICAgICAgICAgcm91dGUuY2FuRGVhY3RpdmF0ZSA9IFtCYXNlQ2FuRGVhY3RpdmF0ZV07XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByb3V0ZS5jYW5EZWFjdGl2YXRlLnB1c2goQmFzZUNhbkRlYWN0aXZhdGUpO1xyXG4gICAgfVxyXG5cclxufVxyXG4iXX0=